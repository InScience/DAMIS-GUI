CREATE TABLE users (id INT AUTO_INCREMENT NOT NULL, username VARCHAR(255) NOT NULL, username_canonical VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, email_canonical VARCHAR(255) NOT NULL, enabled TINYINT(1) NOT NULL, salt VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, last_login DATETIME DEFAULT NULL, locked TINYINT(1) NOT NULL, expired TINYINT(1) NOT NULL, expires_at DATETIME DEFAULT NULL, confirmation_token VARCHAR(255) DEFAULT NULL, password_requested_at DATETIME DEFAULT NULL, roles LONGTEXT NOT NULL COMMENT '(DC2Type:array)', credentials_expired TINYINT(1) NOT NULL, credentials_expire_at DATETIME DEFAULT NULL, registeredAt DATETIME NOT NULL, name VARCHAR(255) DEFAULT NULL, surname VARCHAR(255) DEFAULT NULL, organisation VARCHAR(255) DEFAULT NULL, user_id VARCHAR(255) DEFAULT NULL, UNIQUE INDEX UNIQ_1483A5E992FC23A8 (username_canonical), UNIQUE INDEX UNIQ_1483A5E9A0D96FBF (email_canonical), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE parametervalue (ParameterValue VARCHAR(255) DEFAULT NULL, ParameterValueID INT AUTO_INCREMENT NOT NULL, WorkflowTaskID INT DEFAULT NULL, ParameterID INT DEFAULT NULL, INDEX FK_PARAMETERVALUE_WORKFLOWTASK (WorkflowTaskID), INDEX FK_PARAMETERVALUE_PARAMETER (ParameterID), UNIQUE INDEX PARAMETERVALUE_PK (ParameterValueID), PRIMARY KEY(ParameterValueID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE pvalueoutpvaluein (InParameterValueID INT NOT NULL, OutParameterValueID INT DEFAULT NULL, INDEX IDX_A522F8AE88C1F20 (OutParameterValueID), INDEX FK_PVALUEOUT_PARAMETERVALUE (InParameterValueID), PRIMARY KEY(InParameterValueID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE workflowtask (WorkflowTaskIsRunning INT NOT NULL, WorkflowTaskID INT AUTO_INCREMENT NOT NULL, TaskBox VARCHAR(256) DEFAULT NULL, Message LONGTEXT DEFAULT NULL, ExecutionTime DOUBLE PRECISION DEFAULT NULL, ExperimentID INT DEFAULT NULL, INDEX FK_WORKFLOWTASK_EXPERIMENT (ExperimentID), UNIQUE INDEX WORKFLOWTASK_PK (WorkflowTaskID), PRIMARY KEY(WorkflowTaskID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE cluster (ClusterName VARCHAR(80) NOT NULL, ClusterWorkloadHost VARCHAR(255) NOT NULL, WorkloadUrl VARCHAR(255) DEFAULT NULL, ClusterUrl VARCHAR(255) DEFAULT NULL, ClusterDescription VARCHAR(500) DEFAULT NULL, ClusterID INT AUTO_INCREMENT NOT NULL, PRIMARY KEY(ClusterID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE component (ComponentName VARCHAR(80) NOT NULL, ComponentIcon VARCHAR(255) NOT NULL, ComponentWSDLRunHost VARCHAR(255) DEFAULT NULL, ComponentWSDLCallFunction VARCHAR(80) NOT NULL, ComponentDescription VARCHAR(500) DEFAULT NULL, ComponentAltDescription VARCHAR(80) DEFAULT NULL, ComponentLabelLT VARCHAR(255) DEFAULT NULL, ComponentLabelEN VARCHAR(255) DEFAULT NULL, ComponentID INT AUTO_INCREMENT NOT NULL, FormType VARCHAR(255) DEFAULT NULL, ClusterID INT DEFAULT NULL, ComponentTypeID INT DEFAULT NULL, INDEX FK_COMPONENT_CLUSTER (ClusterID), INDEX FK_COMPONENT_COMPONENTTYPE (ComponentTypeID), UNIQUE INDEX COMPONENT_PK (ComponentID), PRIMARY KEY(ComponentID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE componenttype (ComponentType VARCHAR(80) NOT NULL, ComponentTypeID INT AUTO_INCREMENT NOT NULL, UNIQUE INDEX COMPONENTTYPE_PK (ComponentTypeID), PRIMARY KEY(ComponentTypeID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE experiment (ExperimentName VARCHAR(80) NOT NULL, ExperimentMaxDuration TIME DEFAULT NULL, ExpermentStart INT DEFAULT NULL, ExperimentFinish INT DEFAULT NULL, ExperimentUseCPU INT DEFAULT NULL, ExperimentUsePrimaryMemory INT DEFAULT NULL, ExperimentUseSecMemory INT DEFAULT NULL, ExperimentGUIData LONGTEXT DEFAULT NULL, ExperimentID INT AUTO_INCREMENT NOT NULL, ExperimentStatusID INT DEFAULT NULL, UserID INT DEFAULT NULL, INDEX FK_EXPERIMET_EXPERIMENTSTATUS (ExperimentStatusID), INDEX FK_EXPERIMET_DAMISUSER (UserID), UNIQUE INDEX EXPERIMENT_PK (ExperimentID), PRIMARY KEY(ExperimentID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE experimentstatus (ExperimentStatus VARCHAR(80) NOT NULL, ExperimentStatusID INT AUTO_INCREMENT NOT NULL, UNIQUE INDEX EXPERIMENTSTATUS_PK (ExperimentStatusID), PRIMARY KEY(ExperimentStatusID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE parameter (ParameterName VARCHAR(80) NOT NULL, ParameterIsRequired INT NOT NULL, ParameterDefault VARCHAR(80) DEFAULT NULL, ParameterDescription VARCHAR(500) DEFAULT NULL, ParameterLabelLT VARCHAR(255) DEFAULT NULL, ParameterLabelEN VARCHAR(255) DEFAULT NULL, ParameterID INT AUTO_INCREMENT NOT NULL, ParameterSlug VARCHAR(255) DEFAULT NULL, ParameterPosition INT DEFAULT NULL, ParameterTypeID INT DEFAULT NULL, ParameterConnectionTypeID INT DEFAULT NULL, ComponentID INT DEFAULT NULL, INDEX FK_PARAMETER_PARAMTYPERTYPE (ParameterTypeID), INDEX FK_PARAMETER_PARAMCONNTYPE (ParameterConnectionTypeID), INDEX FK_PARAMETER_COMPONENT (ComponentID), UNIQUE INDEX PARAMETER_PK (ParameterID), PRIMARY KEY(ParameterID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE parameterconnectiontype (ParameterConnectionType VARCHAR(80) NOT NULL, ParameterConnectionTypeID INT AUTO_INCREMENT NOT NULL, UNIQUE INDEX PARAMETERCONNECTIONTYPE_PK (ParameterConnectionTypeID), PRIMARY KEY(ParameterConnectionTypeID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE parametertype (ParameterType VARCHAR(80) NOT NULL, ParameterTypeID INT AUTO_INCREMENT NOT NULL, UNIQUE INDEX PARAMETERTYPE_PK (ParameterTypeID), PRIMARY KEY(ParameterTypeID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE page (id INT AUTO_INCREMENT NOT NULL, title VARCHAR(255) NOT NULL, slug VARCHAR(128) NOT NULL, groupName VARCHAR(255) DEFAULT NULL, text LONGTEXT DEFAULT NULL, position INT NOT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, language enum('lt', 'en'), UNIQUE INDEX UNIQ_140AB620989D9B62 (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE dataset (DatasetIsMIDAS INT NOT NULL, DatasetTitle VARCHAR(80) NOT NULL, DatasetCreated INT NOT NULL, DatasetFilePath VARCHAR(255) DEFAULT NULL, DatasetUpdated INT DEFAULT NULL, file LONGTEXT DEFAULT NULL COMMENT '(DC2Type:array)', DatasetDescription VARCHAR(500) DEFAULT NULL, DatasetID INT AUTO_INCREMENT NOT NULL, Hidden INT DEFAULT NULL, UserID INT DEFAULT NULL, INDEX FK_DATASET_DAMISUSER (UserID), UNIQUE INDEX DATASET_PK (DatasetID), PRIMARY KEY(DatasetID)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE useralgorithm (id INT AUTO_INCREMENT NOT NULL, user_id INT DEFAULT NULL, file_title VARCHAR(80) NOT NULL, file_created INT NOT NULL, file_path VARCHAR(255) DEFAULT NULL, file_updated INT DEFAULT NULL, file LONGTEXT DEFAULT NULL COMMENT '(DC2Type:array)', file_description VARCHAR(500) DEFAULT NULL, hidden INT DEFAULT NULL, INDEX FK_ALGORITHM_FILE_DAMISUSER (user_id), UNIQUE INDEX USER_ALGORITHM_FILE_PK (id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE entity_log (id INT AUTO_INCREMENT NOT NULL, action VARCHAR(8) NOT NULL, logged_at DATETIME NOT NULL, object_id VARCHAR(64) DEFAULT NULL, object_class VARCHAR(255) NOT NULL, version INT NOT NULL, data LONGTEXT DEFAULT NULL COMMENT '(DC2Type:array)', username VARCHAR(255) DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE parametervalue ADD CONSTRAINT FK_EF5C2B2A199F0DB9 FOREIGN KEY (WorkflowTaskID) REFERENCES workflowtask (WorkflowTaskID) ON DELETE CASCADE;
ALTER TABLE parametervalue ADD CONSTRAINT FK_EF5C2B2A5A8577F9 FOREIGN KEY (ParameterID) REFERENCES parameter (ParameterID);
ALTER TABLE pvalueoutpvaluein ADD CONSTRAINT FK_A522F8AEF169B8E2 FOREIGN KEY (InParameterValueID) REFERENCES parametervalue (ParameterValueID) ON DELETE CASCADE;
ALTER TABLE pvalueoutpvaluein ADD CONSTRAINT FK_A522F8AE88C1F20 FOREIGN KEY (OutParameterValueID) REFERENCES parametervalue (ParameterValueID) ON DELETE CASCADE;
ALTER TABLE workflowtask ADD CONSTRAINT FK_5F598CF2BAA1BE51 FOREIGN KEY (ExperimentID) REFERENCES experiment (ExperimentID) ON DELETE CASCADE;
ALTER TABLE component ADD CONSTRAINT FK_49FEA157B26192BE FOREIGN KEY (ClusterID) REFERENCES cluster (ClusterID);
ALTER TABLE component ADD CONSTRAINT FK_49FEA1576ACDD642 FOREIGN KEY (ComponentTypeID) REFERENCES componenttype (ComponentTypeID);
ALTER TABLE experiment ADD CONSTRAINT FK_136F58B234472C01 FOREIGN KEY (ExperimentStatusID) REFERENCES experimentstatus (ExperimentStatusID);
ALTER TABLE experiment ADD CONSTRAINT FK_136F58B258746832 FOREIGN KEY (UserID) REFERENCES users (id);
ALTER TABLE parameter ADD CONSTRAINT FK_2A979110D50E99E0 FOREIGN KEY (ParameterTypeID) REFERENCES parametertype (ParameterTypeID);
ALTER TABLE parameter ADD CONSTRAINT FK_2A97911010C17FF9 FOREIGN KEY (ParameterConnectionTypeID) REFERENCES parameterconnectiontype (ParameterConnectionTypeID);
ALTER TABLE parameter ADD CONSTRAINT FK_2A979110C364FDFE FOREIGN KEY (ComponentID) REFERENCES component (ComponentID);
ALTER TABLE dataset ADD CONSTRAINT FK_B7A041D058746832 FOREIGN KEY (UserID) REFERENCES users (id);
ALTER TABLE useralgorithm ADD CONSTRAINT FK_5B486DD9A76ED395 FOREIGN KEY (user_id) REFERENCES users (id);
